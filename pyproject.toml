# Keep this default because xml/report do not know to use load it from config file:
# data_file = ".coverage"

[tool.coverage.paths]
source = ["src", ".tox/*/site-packages"]

[tool.coverage.report]
exclude_also = ["pragma: no cover", "if TYPE_CHECKING:"]
# Increase it just so it would pass on any single-python run
fail_under = 93
# During development we might remove code (files) with coverage data, and we dont want to fail:
ignore_errors = true
omit = ["tests/*"]
partial_branches = ["pragma: no cover", "if TYPE_CHECKING:"]
show_missing = true
skip_covered = true
skip_empty = true

[tool.coverage.run]
# branch is more reliable than lines, protects against false positives
branch = true
concurrency = ["multiprocessing", "thread"]
parallel = true
source = ["src"]

[tool.ruff]
# Same as Black.
line-length = 88
preview = true

[tool.ruff.lint]
extend-unsafe-fixes = ["E501"]
fixable = ["ALL"]
ignore = [
  # temporary disabled during ruff adoption
  "A",
  "ANN",
  "ARG",
  "B",
  "BLE",
  "C",
  "COM",
  "CPY",
  "D",
  "DOC",
  "EM",
  "ERA",
  "FBT",
  "FIX",
  "FURB",
  "G",
  "I001",
  "INP",
  "N",
  "PGH",
  "PLC",
  "PLR",
  "PLW",
  "PT",
  "PTH",
  "RUF",
  "SIM",
  "T",
  "TD",
  "TRY",
  "UP",
  # disabled on purpose
  "E501"
]
select = ["ALL"]

[tool.ruff.lint.isort]
known-first-party = ["src"]

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = ["D", "S"]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.setuptools_scm]
# For smarter version schemes and other configuration options,
# check out https://github.com/pypa/setuptools_scm
version_scheme = "no-guess-dev"

[tool.tomlsort]
in_place = true
sort_inline_tables = true
sort_table_keys = true
